<div [class]="'mb-2 mt-1' + (vertical() && !!label() ? '' : ' row')" #trigger>
    @if (label()) {
    <div class="mt-2 d-flex flex-row align-items-center justify-content-between">
        <label [for]="cId" class="form-label">
            {{ label() }}
        </label>
        <ng-content #name class="form-label"></ng-content>
    </div>
    }
    @if (ngDisabled) {
    {{setDisabledState(ngDisabled)}}
    } @else{
    {{setDisabledState(ngDisabled)}}
    }
    <div class="col-sm">
        <input type="text" (click)="!isMenuOpen?openMenu(trigger):closeMenu()" (dblclick)="null"
            class="form-control {{ showError() ? 'border border-danger' : '' }} {{ ngDisabled ? 'bg-body-secondary' : '' }}"
            [id]="cId" placeholder="Date Group: {{value.length}}" readonly />
    </div>
</div>

<ng-template #menuTemplate>
    <ndp-card class="mt-2">
        <div class="d-flex flex-column">
            <div [formGroup]="fg" class="date-group overflow-y-auto" [style]="{ maxHeight: '300px' }">
                @for (item of controlsArray; track $index) {
                <div class="d-flex flex-row">
                    <div class="align-content-center justify-content-center me-2 mb-2 mt-1">{{(item.index +1)}}. </div>
                    <ndp-date-input id="{{item.name}}" [formControlName]="item.name"></ndp-date-input>
                    <div class="align-self-end">
                        <button class="btn btn-danger align-items-center justify-content-center mx-2 mb-2 mt-1"
                            (dblclick)="null" (click)="deleteControl(item.name, item.index)">
                            <img src="delete.svg" alt="buscar" style="width: 20px;" />
                        </button>
                    </div>
                </div>
                }
            </div>
            <div class="d-flex flex-row align-items-center justify-content-center">
                <button
                    class="btn btn-primary d-flex align-items-center justify-content-center mx-2 mb-1 mt-1 p-1 rounded-circle"
                    (dblclick)="null" (click)="addNewControl()">
                    <img src="add.svg" alt="mod" style="width: 20px;" />
                </button>
            </div>
        </div>
    </ndp-card>
</ng-template>